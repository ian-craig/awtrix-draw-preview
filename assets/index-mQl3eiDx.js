var L=Object.defineProperty;var C=(i,t,a)=>t in i?L(i,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[t]=a;var v=(i,t,a)=>C(i,typeof t!="symbol"?t+"":t,a);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))d(h);new MutationObserver(h=>{for(const e of h)if(e.type==="childList")for(const n of e.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&d(n)}).observe(document,{childList:!0,subtree:!0});function a(h){const e={};return h.integrity&&(e.integrity=h.integrity),h.referrerPolicy&&(e.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?e.credentials="include":h.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function d(h){if(h.ep)return;h.ep=!0;const e=a(h);fetch(h.href,e)}})();const A={" ":{bitmap:[0],width:8,height:1,advance:2},"!":{bitmap:[128,128,128,0,128],width:8,height:5,advance:2},'"':{bitmap:[160,160],width:8,height:2,advance:4},"#":{bitmap:[160,224,160,224,160],width:8,height:5,advance:4},$:{bitmap:[96,192,96,192,64],width:8,height:5,advance:4},"%":{bitmap:[160,32,64,128,160],width:8,height:5,advance:4},"&":{bitmap:[192,192,224,160,96],width:8,height:5,advance:4},"'":{bitmap:[128,128],width:8,height:2,advance:2},"(":{bitmap:[64,128,128,128,64],width:8,height:5,advance:3},")":{bitmap:[128,64,64,64,128],width:8,height:5,advance:3},"*":{bitmap:[160,64,160],width:8,height:3,advance:4},"+":{bitmap:[64,224,64],width:8,height:3,advance:4},",":{bitmap:[64,128],width:8,height:2,advance:3},"-":{bitmap:[224],width:8,height:1,advance:4},".":{bitmap:[128],width:8,height:1,advance:2},"/":{bitmap:[32,32,64,128,128],width:8,height:5,advance:4},0:{bitmap:[224,160,160,160,224],width:8,height:5,advance:4},1:{bitmap:[64,192,64,64,224],width:8,height:5,advance:4},2:{bitmap:[224,32,224,128,224],width:8,height:5,advance:4},3:{bitmap:[224,32,224,32,224],width:8,height:5,advance:4},4:{bitmap:[160,160,224,32,32],width:8,height:5,advance:4},5:{bitmap:[224,128,224,32,224],width:8,height:5,advance:4},6:{bitmap:[224,128,224,160,224],width:8,height:5,advance:4},7:{bitmap:[224,32,32,32,32],width:8,height:5,advance:4},8:{bitmap:[224,160,224,160,224],width:8,height:5,advance:4},9:{bitmap:[224,160,224,32,224],width:8,height:5,advance:4},":":{bitmap:[128,0,128],width:8,height:3,advance:2},";":{bitmap:[64,0,64,128],width:8,height:4,advance:3},"<":{bitmap:[32,64,128,64,32],width:8,height:5,advance:4},"=":{bitmap:[224,0,224],width:8,height:3,advance:4},">":{bitmap:[128,64,32,64,128],width:8,height:5,advance:4},"?":{bitmap:[224,32,64,0,64],width:8,height:5,advance:4},"@":{bitmap:[64,160,224,128,96],width:8,height:5,advance:4},A:{bitmap:[192,160,224,160,160],width:8,height:5,advance:4},B:{bitmap:[192,160,192,160,192],width:8,height:5,advance:4},C:{bitmap:[64,160,128,160,64],width:8,height:5,advance:4},D:{bitmap:[192,160,160,160,192],width:8,height:5,advance:4},E:{bitmap:[224,128,224,128,224],width:8,height:5,advance:4},F:{bitmap:[224,128,224,128,128],width:8,height:5,advance:4},G:{bitmap:[96,128,160,160,96],width:8,height:5,advance:4},H:{bitmap:[160,160,224,160,160],width:8,height:5,advance:4},I:{bitmap:[128,128,128,128,128],width:8,height:5,advance:2},J:{bitmap:[32,32,32,160,64],width:8,height:5,advance:4},K:{bitmap:[160,160,192,160,160],width:8,height:5,advance:4},L:{bitmap:[128,128,128,128,224],width:8,height:5,advance:4},M:{bitmap:[136,216,168,136,136],width:8,height:5,advance:6},N:{bitmap:[144,208,176,144,144],width:8,height:5,advance:5},O:{bitmap:[64,160,160,160,64],width:8,height:5,advance:4},P:{bitmap:[224,160,192,128,128],width:8,height:5,advance:4},Q:{bitmap:[64,160,160,160,112],width:8,height:5,advance:5},R:{bitmap:[224,160,192,160,160],width:8,height:5,advance:4},S:{bitmap:[224,128,224,32,224],width:8,height:5,advance:4},T:{bitmap:[224,64,64,64,64],width:8,height:5,advance:4},U:{bitmap:[160,160,160,160,224],width:8,height:5,advance:4},V:{bitmap:[160,160,160,160,64],width:8,height:5,advance:4},W:{bitmap:[136,136,136,168,80],width:8,height:5,advance:6},X:{bitmap:[160,160,64,160,160],width:8,height:5,advance:4},Y:{bitmap:[160,160,224,32,192],width:8,height:5,advance:4},Z:{bitmap:[224,32,64,128,224],width:8,height:5,advance:4},"[":{bitmap:[224,128,128,128,224],width:8,height:5,advance:4},"\\":{bitmap:[128,64,32],width:8,height:3,advance:4},"]":{bitmap:[224,32,32,32,224],width:8,height:5,advance:4},"^":{bitmap:[64,160],width:8,height:2,advance:4},_:{bitmap:[224],width:8,height:1,advance:4},"`":{bitmap:[128,64],width:8,height:2,advance:3},a:{bitmap:[192,96,160,224],width:8,height:4,advance:4},b:{bitmap:[128,192,160,160,192],width:8,height:5,advance:4},c:{bitmap:[96,128,128,96],width:8,height:4,advance:4},d:{bitmap:[32,96,160,160,96],width:8,height:5,advance:4},e:{bitmap:[96,160,192,96],width:8,height:4,advance:4},f:{bitmap:[32,64,224,64,64],width:8,height:5,advance:4},g:{bitmap:[96,160,224,32,64],width:8,height:5,advance:4},h:{bitmap:[128,192,160,160,160],width:8,height:5,advance:4},i:{bitmap:[128,0,128,128,128],width:8,height:5,advance:2},j:{bitmap:[32,0,32,32,160,64],width:8,height:6,advance:4},k:{bitmap:[128,160,192,192,160],width:8,height:5,advance:4},l:{bitmap:[192,64,64,64,224],width:8,height:5,advance:4},m:{bitmap:[224,224,224,160],width:8,height:4,advance:4},n:{bitmap:[192,160,160,160],width:8,height:4,advance:4},o:{bitmap:[64,160,160,64],width:8,height:4,advance:4},p:{bitmap:[192,160,160,192,128],width:8,height:5,advance:4},q:{bitmap:[96,160,160,96,32],width:8,height:5,advance:4},r:{bitmap:[96,128,128,128],width:8,height:4,advance:4},s:{bitmap:[96,192,96,192],width:8,height:4,advance:4},t:{bitmap:[64,224,64,64,96],width:8,height:5,advance:4},u:{bitmap:[160,160,160,96],width:8,height:4,advance:4},v:{bitmap:[160,160,224,64],width:8,height:4,advance:4},w:{bitmap:[160,224,224,224],width:8,height:4,advance:4},x:{bitmap:[160,64,64,160],width:8,height:4,advance:4},y:{bitmap:[160,160,96,32,64],width:8,height:5,advance:4},z:{bitmap:[224,96,192,224],width:8,height:4,advance:4},"{":{bitmap:[96,64,128,64,96],width:8,height:5,advance:4},"|":{bitmap:[128,128,128,128,128],width:8,height:5,advance:2},"}":{bitmap:[192,64,32,64,192],width:8,height:5,advance:4},"~":{bitmap:[96,192],width:8,height:2,advance:4}};function O(i){return A[i]||null}function P(i,t,a,d,h){const e=O(d);if(!e)return 0;const{bitmap:n,height:r}=e,f=Math.max(0,5-r);for(let o=0;o<n.length&&o<r;o++){const p=n[o];for(let s=0;s<8;s++)(p&128>>s)!==0&&F(i,t+s,a+f+o,h)}return e.advance}function F(i,t,a,d){if(t<0||t>=32||a<0||a>=8)return;const[h,e,n]=d,r=(a*32+t)*4;i.data[r]=h,i.data[r+1]=e,i.data[r+2]=n,i.data[r+3]=255}const w=32,u=8,E=14,S=2,m=E+S;function g(i){if(typeof i=="string"){const t=i.replace("#","");if(t.length!==6)throw new Error(`Invalid hex color: ${i}`);const a=parseInt(t.substring(0,2),16),d=parseInt(t.substring(2,4),16),h=parseInt(t.substring(4,6),16);return[a,d,h]}else{if(Array.isArray(i)&&i.length===3)return i;throw new Error(`Invalid color format: ${JSON.stringify(i)}`)}}function c(i,t,a,d){if(t<0||t>=w||a<0||a>=u)return;const[h,e,n]=d,r=(a*w+t)*4;i.data[r]=h,i.data[r+1]=e,i.data[r+2]=n,i.data[r+3]=255}function H(i,t,a,d,h,e){const n=Math.abs(d-t),r=Math.abs(h-a),f=t<d?1:-1,o=a<h?1:-1;let p=n-r,s=t,b=a;for(;c(i,s,b,e),!(s===d&&b===h);){const l=2*p;l>-r&&(p-=r,s+=f),l<n&&(p+=n,b+=o)}}function M(i,t,a,d,h,e){for(let n=0;n<d;n++)c(i,t+n,a,e),c(i,t+n,a+h-1,e);for(let n=0;n<h;n++)c(i,t,a+n,e),c(i,t+d-1,a+n,e)}function N(i,t,a,d,h,e){for(let n=0;n<h;n++)for(let r=0;r<d;r++)c(i,t+r,a+n,e)}function R(i,t,a,d,h){let e=d,n=0,r=1-d;for(;e>=n;)c(i,t+e,a+n,h),c(i,t-e,a+n,h),c(i,t+e,a-n,h),c(i,t-e,a-n,h),c(i,t+n,a+e,h),c(i,t-n,a+e,h),c(i,t+n,a-e,h),c(i,t-n,a-e,h),r<0?r+=2*n+3:(r+=2*(n-e)+5,e--),n++}function T(i,t,a,d,h){for(let e=-d;e<=d;e++)for(let n=-d;n<=d;n++)n*n+e*e<=d*d&&c(i,t+n,a+e,h)}function $(i,t,a,d,h){let e=t;for(const n of d){const r=P(i,e,a,n,h);e+=r}}function I(i){for(let t=0;t<i.data.length;t+=4)i.data[t]=0,i.data[t+1]=0,i.data[t+2]=0,i.data[t+3]=0}function B(i,t){if(t.dp){const[a,d,h]=t.dp,e=g(h);c(i,a,d,e)}else if(t.dl){const[a,d,h,e,n]=t.dl,r=g(n);H(i,a,d,h,e,r)}else if(t.dr){const[a,d,h,e,n]=t.dr,r=g(n);M(i,a,d,h,e,r)}else if(t.df){const[a,d,h,e,n]=t.df,r=g(n);N(i,a,d,h,e,r)}else if(t.dc){const[a,d,h,e]=t.dc,n=g(e);R(i,a,d,h,n)}else if(t.dfc){const[a,d,h,e]=t.dfc,n=g(e);T(i,a,d,h,n)}else if(t.dt){const[a,d,h,e]=t.dt,n=g(e);$(i,a,d,h,n)}}function X(i){const t=JSON.parse(i);if(!Array.isArray(t))throw new Error("Expected an array of drawing commands");const a=[];for(const d of t){if(typeof d!="object"||d===null)throw new Error("Each command must be an object");a.push(d)}return a}class _{constructor(){v(this,"canvas");v(this,"ctx");v(this,"imageData");v(this,"textarea");v(this,"errorDisplay");this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.textarea=document.getElementById("codeInput"),this.errorDisplay=document.getElementById("errorDisplay"),this.canvas.width=w*m,this.canvas.height=u*m,this.imageData=this.ctx.createImageData(w,u),this.clearAndRender(),this.textarea.addEventListener("input",()=>this.handleInputChange()),this.textarea.addEventListener("change",()=>this.handleInputChange()),this.loadExample()}clearAndRender(){I(this.imageData),this.render()}render(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const t=w*m,a=u*m,d=this.ctx.createImageData(t,a);for(let h=0;h<u;h++)for(let e=0;e<w;e++){const n=(h*w+e)*4,r=this.imageData.data[n],f=this.imageData.data[n+1],o=this.imageData.data[n+2],p=this.imageData.data[n+3],s=e*m,b=h*m;for(let l=0;l<E;l++)for(let x=0;x<E;x++){const y=((b+l)*t+(s+x))*4;d.data[y]=r,d.data[y+1]=f,d.data[y+2]=o,d.data[y+3]=p}}this.ctx.putImageData(d,0,0)}handleInputChange(){const t=this.textarea.value.trim();if(!t){this.clearAndRender(),this.errorDisplay.innerHTML="",this.errorDisplay.style.display="none";return}try{const a=X(t);I(this.imageData);for(const d of a)try{B(this.imageData,d)}catch(h){const e=h instanceof Error?h.message:String(h);this.showError(`Command execution error: ${e}`);return}this.render(),this.errorDisplay.innerHTML="",this.errorDisplay.style.display="none"}catch(a){const d=a instanceof Error?a.message:String(a);this.showError(`Parse error: ${d}`)}}showError(t){this.errorDisplay.innerHTML=`<strong>Error:</strong> ${J(t)}`,this.errorDisplay.style.display="block"}loadExample(){const t=`[
    { "dc": [28, 4, 3, "#FF0000"] },
    { "dr": [20, 4, 4, 4, "#0000FF"] },
    { "df": [8, 2, 4, 4, "#00FF00"] },
    { "dt": [0, 0, "HELLO", "#FFFF00"] }
]`;this.textarea.value=t,this.handleInputChange()}}function J(i){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return i.replace(/[&<>"']/g,a=>t[a])}document.addEventListener("DOMContentLoaded",()=>{new _});
